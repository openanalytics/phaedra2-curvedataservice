databaseChangeLog:
  - changeSet:
      id: 01_initial_db
      author: sberberovic
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                schemaName: curvedata
                tableName: curve
      changes:
        - sql:
            sql: DO $$ BEGIN
                  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'status_code') THEN
                    CREATE TYPE status_code AS ENUM ('SCHEDULED', 'SUCCESS', 'FAILURE');
                    CREATE CAST (CHARACTER VARYING AS status_code) WITH INOUT AS IMPLICIT;
                  END IF;
                END $$;
        - createTable:
            tableName: curve
            columns:
              - column:
                  name: id
                  type: bigint
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
#              TODO: add rest of the columns and other tables
